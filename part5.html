<!doctype html>
<html lang="en">
<head>
    <title>F20DV Lab 1</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src='https://d3js.org/d3.v7.min.js'></script>
</head>
<body>
    <div class="container my-4">
        <a href="index.html" class="btn btn-outline-secondary float-end">Back to Index</a>

        <h1>F20DV Lab 1</h1>
        <h4 class="text-muted">Data & SVG</h4>
        <p class="lead">Calum Shepherd - H00292866</p>
        <hr />

        <!-- Exercise 9 -->
        <p>Output in console log.</p>
        <script>
            let titaniccsv = 'https://raw.githubusercontent.com/dsindy/kaggle-titanic/master/data/test.csv';

            let data = d3.csv(titaniccsv).then(function(d)
            {
                let titles = {'Mr': 0, 'Mrs': 0};
                let sexes = {'male': 0, 'female': 0};
                d.forEach(function(row)
                {
                    if (row.Name.includes("Mr")) {
                        titles.Mr++;
                    } else {
                        titles.Mrs++;
                    }

                    if (row.Sex.toLowerCase() == "male") {
                        sexes.male++;
                    } else {
                        sexes.female++;
                    }
                });

                console.log("Number of...Mr: " + titles.Mr + "; Mrs: " + titles.Mrs);
                console.log("Number of...males: " + sexes.male + "; females: " + sexes.female);
            });
        </script>
        <hr/>

        <!-- Exercise 10 -->
        <script>
            let heartfailure = d3.csv('https://raw.githubusercontent.com/akmand/datasets/master/heart_failure.csv')
            .then(function(d)
            {
                deaths_by_age = [0, 0, 0, 0];

                d.forEach(function(row)
                {
                    if (row.age < 30) { deaths_by_age[0]++; } else
                    if (row.age < 40) { deaths_by_age[1]++; } else
                    if (row.age < 60) { deaths_by_age[2]++; } else
                    { deaths_by_age[3]++; }
                });

                d3.select("div")
                .selectAll("p")
                .data(deaths_by_age)
                .enter()
                .append("p")
                .text(function (d, i) {
                    switch (i) {
                        case 0:
                            return "age < 30: " + d;
                            break;
                        case 1:
                            return "30 < age < 40: " + d;
                            break;
                        case 2:
                            return "40 < age < 60: " + d;
                            break;
                        case 3:
                            return "age > 100: " + d;
                            break;
                    }
                });
            });
        </script>

        <script>
            //Create SVG element
            var svg = d3.select("body")
            .append("svg")
            .attr("width",  400)
            .attr("height", 400)
            .style("border", '1px solid green');

            //Create line element inside SVG
            svg.append("line").attr("x1", 10).attr("x2", 390).attr("y1", 10).attr("y2", 10).attr("stroke", "blue")
            svg.append("line").attr("x1", 10).attr("x2", 10).attr("y1", 10).attr("y2", 390).attr("stroke", "red")
            svg.append("line").attr("x1", 390).attr("x2", 10).attr("y1", 390).attr("y2", 390).attr("stroke", "green")
            svg.append("line").attr("x1", 390).attr("x2", 390).attr("y1", 390).attr("y2", 10).attr("stroke", "pink")
        </script>

        <script>
            var svg = d3.select("body")
            .append("svg")
            .attr("width",  400)
            .attr("height", 400)
            .style("border", '1px solid green');

            d3.csv('shapes.csv', function(data)
            {
                switch(data.type) {
                    case "rect":
                        // TODO
                        break;
                    case "circle":
                        break;
                    case "ellipse":
                        break;
                    case "text":
                        break;
                }
            });

            /*
            Exercise 13: Extend the example to include the ‘enter’ and ‘exit’ concepts.  So that the svg elements are updated,
            created or removed based on the csv data from your csv file.
             */

        </script>
    </div>
</body>
</html>
